//ç»™ä½  k æšç›¸åŒçš„é¸¡è›‹ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ä¸€æ ‹ä»ç¬¬ 1 å±‚åˆ°ç¬¬ n å±‚å…±æœ‰ n å±‚æ¥¼çš„å»ºç­‘ã€‚
//
// å·²çŸ¥å­˜åœ¨æ¥¼å±‚ f ï¼Œæ»¡è¶³ 0 <= f <= n ï¼Œä»»ä½•ä» é«˜äº f çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¼šç¢ï¼Œä» f æ¥¼å±‚æˆ–æ¯”å®ƒä½çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¸ä¼šç ´ã€‚ 
//
// æ¯æ¬¡æ“ä½œï¼Œä½ å¯ä»¥å–ä¸€æšæ²¡æœ‰ç¢çš„é¸¡è›‹å¹¶æŠŠå®ƒä»ä»»ä¸€æ¥¼å±‚ x æ‰”ä¸‹ï¼ˆæ»¡è¶³ 1 <= x <= nï¼‰ã€‚å¦‚æœé¸¡è›‹ç¢äº†ï¼Œä½ å°±ä¸èƒ½å†æ¬¡ä½¿ç”¨å®ƒã€‚å¦‚æœæŸæšé¸¡è›‹æ‰”ä¸‹åæ²¡æœ‰æ‘”ç¢
//ï¼Œåˆ™å¯ä»¥åœ¨ä¹‹åçš„æ“ä½œä¸­ é‡å¤ä½¿ç”¨ è¿™æšé¸¡è›‹ã€‚ 
//
// è¯·ä½ è®¡ç®—å¹¶è¿”å›è¦ç¡®å®š f ç¡®åˆ‡çš„å€¼ çš„ æœ€å°æ“ä½œæ¬¡æ•° æ˜¯å¤šå°‘ï¼Ÿ 
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šk = 1, n = 2
//è¾“å‡ºï¼š2
//è§£é‡Šï¼š
//é¸¡è›‹ä» 1 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 0 ã€‚ 
//å¦åˆ™ï¼Œé¸¡è›‹ä» 2 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 1 ã€‚ 
//å¦‚æœå®ƒæ²¡ç¢ï¼Œé‚£ä¹ˆè‚¯å®šèƒ½å¾—å‡º f = 2 ã€‚ 
//å› æ­¤ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç§»åŠ¨ 2 æ¬¡ä»¥ç¡®å®š f æ˜¯å¤šå°‘ã€‚ 
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šk = 2, n = 6
//è¾“å‡ºï¼š3
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// 
//è¾“å…¥ï¼šk = 3, n = 14
//è¾“å‡ºï¼š4
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= k <= 100 
// 1 <= n <= 10â´ 
// 
// Related Topics æ•°å­¦ äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’ ğŸ‘ 733 ğŸ‘ 0


package com.company.leetcode.editor.cn;

import java.util.HashMap;
import java.util.Map;

public class No_Eight87_SuperEggDrop {
    public static void main(String[] args) {
        Solution solution = new No_Eight87_SuperEggDrop().new Solution();
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        /**
         * é¢˜ç›®è¦æ±‚çš„æ˜¯ï¼šæœ€åæƒ…å†µä¸‹çš„ æœ€å°‘æ­¥æ•°
         * æœ€åæƒ…å†µï¼šè·Ÿã€æœç´¢ç©ºé—´ã€‘æœ‰å…³ï¼Œä¸é€‰æ‹©æ— å…³ã€‚ç©·å°½æœç´¢ç©ºé—´ä¹‹åï¼Œæœ€åæ‰èƒ½æ‰¾åˆ°ï¼ˆè€Œä¸æ˜¯è¿æ°”å¥½ï¼Œç¬¬ä¸€æ¬¡å°±è’™å¯¹äº†ï¼Œè¿™æ ·é—®æ²¡æœ‰æ„ä¹‰ï¼‰
         * æœ€å°‘æ­¥æ•°ï¼šè·Ÿã€æœç´¢æ–¹æ³•ã€‘æœ‰å…³ï¼Œä¸é€‰æ‹©æœ‰å…³ã€‚æœç´¢ç©ºé—´æ˜¯ä¸€å®šçš„ï¼Œæœç´¢æ–¹æ³•æ˜¯æœ‰ä¼˜åŠ£ä¹‹åˆ†çš„ï¼Œæœ€å‚»çš„æ˜¯ä»1æ¥¼å¼€å§‹éå†ï¼Œèªæ˜çš„æ˜¯äºŒåˆ†ï¼Œæ‰€ä»¥é—®æœ€èªæ˜çš„æ–¹æ³•çš„æœ€å°‘æ­¥æ•°ï¼ˆåŒæ ·ï¼Œé—®æœ€å¤§æ­¥æ•°ä¹Ÿæ²¡æœ‰æ„ä¹‰ï¼Œç›´æ¥éå†å°±æ˜¯æœ€å¤§ï¼‰
         * æ­¤å¤–ï¼Œæœ¬åœ°çš„çŠ¶æ€ï¼Œkå’Œnï¼Œå½±å“äº†æœç´¢æ–¹æ³•ï¼šk=1ï¼Œåªèƒ½éå†ï¼Œkè¶³å¤Ÿå¤§ï¼Œå°±å¯ä»¥ä¸€ç›´äºŒåˆ†
         * æ€è·¯ï¼š
         * çŠ¶æ€ï¼škå’Œn
         * å®šä¹‰ï¼šdpè¡¨ç¤º ç”¨kä¸ªé¸¡è›‹ï¼Œåˆ¤æ–­nå±‚æ¥¼ï¼Œæœ€åæƒ…å†µä¸‹çš„æœ€å°‘æ­¥æ•°
         * é€‰æ‹©ä¸è½¬ç§»ï¼šå¯¹äºç¬¬kä¸ªé¸¡è›‹ï¼Œæˆ‘èƒ½åšçš„é€‰æ‹©ï¼šä»i = 1-nå±‚æ¥¼ä¸Šéƒ½æ‰”ä¸€ä¸‹ï¼Œç»“æœï¼š1.å¦‚æœç‚¸äº†ï¼Œè½¬ç§»åˆ°ï¼ˆk-1ï¼Œ[1..i-1]ï¼‰ 2.å¦‚æœæ²¡ç‚¸ï¼Œè½¬ç§»åˆ°ï¼ˆkï¼Œ[i+1,n]ï¼‰.å‘ä¸Šåˆ¤æ–­æ¥¼å±‚æ—¶ï¼Œå¯ä»¥æŠŠç¬¬iå±‚å½“åšåœ°æ¿ï¼ŒæŠŠi+1å±‚å½“åš1æ¥¼ï¼ŒæŠŠ[i+1,n]çœ‹åšå¦ä¸€ä¸ªä»åœ°æ¿å¾€ä¸Šé«˜åº¦ä¸º(n-i)çš„æ¥¼ï¼Œè¿™æ ·çŠ¶æ€ï¼Œå°±å¯ä»¥ç”¨ ä¸€ä¸ªæ¥¼é«˜næ¥è¡¨ç¤ºäº†
         * æœ€åæƒ…å†µ - æ ¹ç»“æœæœ‰å…³ - å–ç»“æœé‡Œæœ€å¤§çš„Max
         * æœ€å°‘æ­¥æ•° - æ ¹é€‰æ‹©ä¼˜åŠ£æœ‰å…³ - å– i = 1-n éå†ä¸­æœ€å°çš„æ­¥æ•°Min
         */
        public int superEggDrop(int k, int n) {
            return dp2(k, n);
        }

        Map<String, Integer> memory = new HashMap<>();

        //æ— äºŒåˆ†ä¼˜åŒ–
        private int dp1(int k, int n) {
            //è¾¹ç•Œæ¡ä»¶ï¼Œn = 0ï¼Œæ˜¾ç„¶ä¸ç”¨æµ‹ï¼Œk=1ï¼Œåªèƒ½éå†
            if (n == 0) {
                return 0;
            }
            if (k == 1) {
                return n;
            }
            String key = String.valueOf(k) + "#" + String.valueOf(n);
            if (memory.containsKey(key)) {
                return memory.get(key);
            }
            //è½¬ç§»:éœ€è¦éå†ä»1åˆ°nå±‚æ¥¼ä¸Šæ‰”é¸¡è›‹ï¼Œæ‰€æœ‰çš„é€‰æ‹©ç»“æœï¼Œæ‰¾åˆ°æœ€å°çš„
            int res = Integer.MAX_VALUE;
            for (int i = 1; i <= n; i++) {
                res = Math.min(
                        res,
                        Math.max(
                                dp(k - 1, i - 1),//ç‚¸äº†ï¼Œæ¶ˆè€—ä¸€ä¸ªé¸¡è›‹ï¼Œå¾€ä¸‹æ‰¾
                                dp(k, n - i)//æ²¡ç‚¸ï¼Œä¸æ¶ˆè€—é¸¡è›‹ï¼Œå¾€ä¸Šæ‰¾
                        ) + 1 //å½“å‰ç¬¬iå±‚æ‰”äº†ä¸€ä¸‹ï¼Œæ“ä½œæ¬¡æ•°++
                );
            }
            memory.put(key, res);
            return res;
        }

        //forå¾ªç¯æ”¹äºŒåˆ†ä¼˜åŒ–

        /**
         * dp(K - 1, i - 1) å…³äºi å•è°ƒé€’å¢ ï¼ˆå› ä¸ºæ¥¼å±‚è¶Šé«˜ï¼Œéœ€è¦æŸ¥è¯¢çš„æ¬¡æ•°è¶Šå¤šï¼‰
         * dp(K, N - i) å…³äºiå•è°ƒé€’å‡
         * å¯¹i in ã€1-nã€‘ï¼Œæ±‚ ä¸¤è€…è¾ƒå¤§å€¼çš„æœ€å°å€¼ï¼š Min ï¼ˆMaxï¼ˆdp(k - 1, i - 1), dp(k, n - i)ï¼‰ï¼‰
         * ç­‰äºæ±‚å‡½æ•°å›¾åƒä¸Š ä¸¤ä¸ªäº¤å‰æ–œçº¿çš„äº¤å‰ç‚¹ ï¼šhttps://mp.weixin.qq.com/s?__biz=MzAxODQxMDM0Mw==&mid=2247484690&idx=1&sn=eea075701a5d96dd5c6e3dc6a993cac5&scene=21#wechat_redirect
         * å³æ­¤æ—¶çš„æ¡ä»¶æ˜¯ï¼šdp(k - 1, i - 1) == dp(k, n - i)ï¼Œå°±æ˜¯æœ€å°å€¼.ç­‰äºæ‰¾å›¾åƒé‡Œçš„â€œå±±è°·â€
         */
        private int dp(int k, int n) {
            //è¾¹ç•Œæ¡ä»¶ï¼Œn = 0ï¼Œæ˜¾ç„¶ä¸ç”¨æµ‹ï¼Œk=1ï¼Œåªèƒ½éå†
            if (n == 0) {
                return 0;
            }
            if (k == 1) {
                return n;
            }
            String key = String.valueOf(k) + "#" + String.valueOf(n);
            if (memory.containsKey(key)) {
                return memory.get(key);
            }
            //è½¬ç§»:éœ€è¦éå†ä»1åˆ°nå±‚æ¥¼ä¸Šæ‰”é¸¡è›‹ï¼Œæ‰€æœ‰çš„é€‰æ‹©ç»“æœï¼Œæ‰¾åˆ°æœ€å°çš„
            int left = 1, right = n;
            int res = Integer.MAX_VALUE;
            while (left <= right) { //å·¦é—­å³é—­åŒºé—´çš„äºŒåˆ†æœç´¢é€€å‡ºæ¡ä»¶æ˜¯ left = right +1 ï¼Œå³ left <= right
                int mid = (left + right) / 2;
                int broken = dp(k - 1, mid - 1);
                int notBroken = dp(k, n - mid);
                if (broken == notBroken) {
                    res = Math.min(res, broken + 1);
                    break;
                } else if (notBroken > broken) { //å±±è°·å‰åŠæ®µ
                    left = mid + 1;
                    res = Math.min(res, notBroken + 1);   //å–è¾ƒå¤§å€¼é‡Œçš„æœ€å°å€¼ï¼Œæ­¤æ—¶çš„è¾ƒå¤§å€¼æ˜¯ notBrokençŠ¶æ€çš„å€¼
                } else if (broken > notBroken) { //å±±è°·ååŠæ®µ
                    right = mid - 1;
                    res = Math.min(res, broken + 1); //å–è¾ƒå¤§å€¼é‡Œçš„æœ€å°å€¼ï¼Œæ­¤æ—¶çš„è¾ƒå¤§å€¼æ˜¯ brokençŠ¶æ€çš„å€¼
                }

            }
            memory.put(key, res);
            return res;
        }

        private int dp2(int k, int n) {
            if (k == 1) return n;
            if (n == 0) return 0;

            //
            String key = String.valueOf(k) + "-" + String.valueOf(n);
            if (memory.containsKey(key)) {
                return memory.get(key);
            }

            int res = Integer.MAX_VALUE;
            for (int i = 1; i <= n; i++) {
                res = Math.min(res, Math.max(dp2(k - 1, i - 1), dp2(k, n - i)) + 1);
            }
            memory.put(key, res);
            return res;
        }
    }
//leetcode submit region end(Prohibit modification and deletion)

}